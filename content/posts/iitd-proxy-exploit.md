+++
title = "IIT Delhi proxy exploit"
date = "2019-07-07"
description = "How we exploited IIT Delhi's Owncloud to bypass proxy server."
+++

How we exploited IIT Delhi's Owncloud to bypass proxy server.

It's been a long time since we actually did this. The institute
provides a 10GB per week internet quota for undergrad students. This
is not sufficient to even watch YouTube videos. We needed to download
lecture playlists for personal use.


### Hypothesis

Let's conceptualize a mechanism to smuggle content inside the campus
without going through the gate of proxy servers. *A sneaky door.*
Undergrad students are provided a local 5 GB [Owncloud account]
(https://owncloud.iitd.ac.in/). It is accesible even outside the campus
(i.e. outside intranet).

> ***Using Owncloud via intranet isn't logged in the weekly proxy
> quota. This could work!***


### Execution

[Devansh](https://github.com/devanshdalal) created a downloader script
that would be run on an external server and assist us in this hack.
The design was simple.

1. Download the desired file on a temporary external server
1. Upload this file to our Owncloud account from the same server

**Basically, our very own proxy service.**

Available free VPS providers had strict limits which would essentially
render our hypothesis useless.

- **Network bandwidth** - Capped at 100 GB per month per instance.
- **Low storage** - Disk space was limited to 1 GB per instance.

I modified the script to download a file in small chunks (0.5 GB).
These chunks would then be uploaded to the Owncloud account. We would
download them locally and the merge script shall restore the original
file.

We would reinstantiate the server once the network bandwidth was
exhausted for that instance.

> ***The scripts worked flawlessly!***

But the effort was too much. For each file, we had to download a lot
of chunks manually and run the merge script. Thanks to the lovely [cURL]
(https://www.wikiwand.com/en/CURL), Devansh figured out an amazing way
to [pipe (redirect) the downloaded bytes]
(https://github.com/musq/iitd-proxy-hack/blob/master/Method-1/get.sh#L8)
directly to Owncloud without creating a temporary copy on the external
server. Now, we didn't even need to merge anything.

### Vulnerability reporting

We decided to communicate this flaw to the institute. I have since
reported the exploit.

<img
    class="post-image"
    src="/img/iitd-proxy-vulnerability-email.png"
    alt="IIT Delhi proxy vulnerability email"
>

### Response

I received no response. However within a week, people received emails
from the institute reminding them of their network policies. If you're
interested in these policies, please find them here ---

- [IT usage policy]
(http://www.cc.iitd.ernet.in/CSC/index.php?option=com_content&view=article&id=50&Itemid=153)
- [Network access and monitoring policy]
(http://www.cc.iitd.ernet.in/CSC/index.php?option=com_content&view=article&id=122&Itemid=155)
- [Privacy policy for IT usage]
(http://www.cc.iitd.ernet.in/CSC/index.php?option=com_content&view=article&id=51&Itemid=154)

### Another concept

Another friend of ours had suggested a rather interesting concept.

1. Download the file on external server and split it into chunks
of 20 MB
1. Email these parts (as attachments) to our institute email id
1. Download these parts from the institute mail server and merge them
locally

This could have worked at the cost of us being flagged for receiving
thousands of emails collectively containing 50 GB of content in a
single day. We never tried this, honestly because facing the
Disciplinary Committee wasn't worth it.


### Closing thoughts

This was a curiously interesting project for me and left a very positive
impression in my mind about computers and their wonderful world.

---

### Source Code

[iitd-proxy-hack](https://github.com/musq/iitd-proxy-hack)
